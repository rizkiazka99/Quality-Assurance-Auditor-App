<%- include('../header') %>
<div class="container">
<div class="row text-center">
    <div class="col-12">
        <h3>Audit Data (Detailed)</h3>
        <form class="d-flex ms-auto" action=" " method="get" >
            <input
              class="form-control me-2"
              type="number"
              name="keyword"
              placeholder="Search"
            />
            <button class="btn btn-outline-warning" type="submit">
              Search
            </button>
        </form>
    </div>
    <div class="col-12 my-2">
        <p>Trying to keep your products' defect(s) in check? You've come to the right place!</p>
    </div>
    
    <div class="container text-center">
    <div class="row">
        <div class="add">
            <a href="/productDefects/add" class="btn btn-outline-warning"><i class="fa-solid fa-square-plus"></i> Start Audit  </a>
        </div>
        <div class="detailed">
            <a href="/productDefects/detailed" class="btn btn-outline-info">Detailed List</a>
        </div>
    </div>
    </div>

    <div class ="col-12 my-2">
        <table class="table table-dark table-striped">
            <thead>
                <tr>
                    <td>No</td>
                    <td>Product ID</td>
                    <td>Product Name</td>
                    <td>Category</td>
                    <td>Defect Name</td>
                    <td>Type</td>
                    <td>Created At</td>
                    <td>Actions</td>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <% productDefects.forEach((productDefect, i) =>{%>
                    <th><%= i + 1 %></th>
                    <th><%= productDefect.product.id %></th>
                    <th><%= productDefect.product.product_name %></th>
                    <th><%= productDefect.product.category %></th>
                    <th><%= productDefect.defect.defect_name %></th>
                    <th><%= productDefect.defect.type %></th>
                    <th>
                        <% let createdAt = productDefect.createdAt.toString(); %>
                        <% let result = createdAt.split('GMT')[0]+'GMT'; %>
                        <%= result %>
                    </th>
                    <th>
                        <a href="/productDefects/delete/<%=productDefect.id%>" class="btn btn-danger"><i class="fa-solid fa-trash" style="color: #d4d9e2;"></i></a>
                        <a href="/productDefects/update/<%=productDefect.id%>" class="btn btn-warning"><i class="fa-solid fa-wrench" style="color: #d80707ce;"></i></a>
                        <a href="/productDefects/product/search/<%=productDefect.productId%>" class="btn btn-info"><i class="fa-solid fa-eye"></i></a>
                    </th>
                </tr>
                <% })%>
            </tbody>
        </table>
    </div>
</div>
</div>
<%- include('../footer') %>